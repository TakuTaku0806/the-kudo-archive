<div class="container mx-auto px-4 py-8">
  
  <!-- Headline -->
  <h1 class="text-3xl font-bold text-gray-800 mb-2">My Manga List</h1>
  <p class="text-gray-600 mb-8">
    Imported from <a href="https://anilist.co" class="text-indigo-600 hover:underline" target="_blank">AniList</a>
  </p>

  <!-- Status tabs -->
  <div class="border-b border-gray-200 mb-8 overflow-x-auto">
    <div class="flex space-x-8 min-w-max">
      <% @available_statuses.each do |status| %>
        <%= link_to manga_path(status: status),
            class: "inline-block py-2 px-1 border-b-2 #{status == @status ? 'border-indigo-600 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} font-medium text-sm transition" do %>
          <%= status.titleize %>
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- Grid -->
  <% if @manga_list.any? %>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">
      <% @manga_list.each do |manga| %>
        <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition">
          <% if manga.cover_image.present? %>
            <img src="<%= manga.cover_image %>" alt="<%= manga.title %>" class="w-full aspect-[3/4] object-cover">
          <% else %>
            <div class="w-full aspect-[3/4] bg-gray-200 flex items-center justify-center text-gray-400">
              <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linecap="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
            </div>
          <% end %>
          <div class="p-3">
            <h3 class="font-medium text-sm line-clamp-2 mb-1" title="<%= manga.title %>">
              <%= manga.title %>
            </h3>
            <div class="flex justify-between items-center text-xs text-gray-500">
              <span>
                <% if manga.chapters.present? %>
                  <%= manga.progress %>/<%= manga.chapters %> ch
                <% elsif manga.volumes.present? %>
                  <%= manga.progress %>/<%= manga.volumes %> vol
                <% else %>
                  ?
                <% end %>
              </span>
              <% if manga.score.present? && manga.score > 0 %>
                <span class="text-yellow-500 font-semibold">★ <%= manga.score %></span>
              <% elsif manga.mean_score.present? %>
                <span class="text-gray-400">★ <%= (manga.mean_score / 10).round(1) %></span>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Pagination -->
    <div class="mt-8">
      <%= paginate @manga_list %>
    </div>
  <% else %>
    <div class="text-center py-16 bg-gray-50 rounded-lg">
      <p class="text-gray-500">No manga in this category.</p>
    </div>
  <% end %>
</div>